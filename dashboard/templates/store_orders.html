{% extends 'base.html' %}

{% load static %}
{% block content%}

 <!-- Dashboard header-->
 <div class="page-title-overlap bg-accent pt-4">
    <div class="container d-flex flex-wrap flex-sm-nowrap justify-content-center justify-content-sm-between align-items-center pt-2">
      <div class="d-flex align-items-center pb-3">
        <div class="img-thumbnail rounded-circle position-relative flex-shrink-0" ><img class="rounded-circle " src="{{store.logo.url}}" width="150" alt="store logo"></div>
        <div class="ps-3">
          <h3 class="text-light fs-lg mb-0">{{store.name}}</h3><span class="d-block text-light fs-ms opacity-60 py-1">Opened since {{store.create_date}}</span>
        </div>
      </div>
      <div class="d-flex">
        <div class="text-sm-end me-5">
          <div class="text-light fs-base">Total sales</div>
          <h3 class="text-light">426</h3>
        </div>
        <div class="text-sm-end">
          <div class="text-light fs-base">Store rating</div>
          <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i>
          </div>
          <div class="text-light opacity-60 fs-xs">Based on 98 reviews</div>
        </div>
      </div>
    </div>
  </div>
  <div class="container mb-5 pb-3">
    <div class="bg-light shadow-lg rounded-3 overflow-hidden">
      <div class="row">
        <!-- Sidebar-->
        <aside class="col-lg-4 pe-xl-5">
          <!-- Account menu toggler (hidden on screens larger 992px)-->
          <div class="d-block d-lg-none p-4"><a class="btn btn-outline-accent d-block" href="#store" data-bs-toggle="collapse"><i class="ci-menu me-2"></i>Account menu</a></div>
          <!-- Actual menu-->
          <div class="h-100 border-end mb-2">
            <div class="d-lg-block collapse" id="store">
              <div class="bg-secondary p-4">
                <h3 class="fs-sm mb-0 text-muted">Store Dashboard</h3>
              </div>
              <ul class="list-unstyled mb-0">
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3 active" href="{% url 'store:store_dashboard' store.slug %}"><i class="ci-settings opacity-60 me-2"></i>Settings</a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="{% url 'dashboard:store_products' store.slug %}"><i class="ci-package opacity-60 me-2"></i>Products<span class="fs-sm text-muted ms-auto">{{products.count}}</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="{% url 'dashboard:store_orders' store.slug %}"><i class="ci-package opacity-60 me-2"></i>Orders<span class="fs-sm text-muted ms-auto"></span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="{% url 'store:add_product' store.slug %}"><i class="ci-cloud-upload opacity-60 me-2"></i>Add New Product</a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="#"><i class="ci-dollar opacity-60 me-2"></i>Sales<span class="fs-sm text-muted ms-auto">$1,375.00</span></a></li>
              </ul>
              <hr>
            </div>
          </div>
        </aside>
        <!-- Content-->
        <!-- Content  -->
      <!-- Content  -->
            <section class="col-lg-8">
                <!-- Toolbar-->
                <div class="d-flex pt-lg-4 pb-4 pb-lg-4 pl-lg-2 mb-lg-2 ">
                    <div class="d-flex align-items-right">
                        <label class="d-none d-lg-block fs-sm text-light text-nowrap opacity-75 me-2" for="order-sort">Sort orders:</label>
                        <label class="d-lg-none fs-sm text-nowrap opacity-75 me-2" for="order-sort">Sort orders:</label>
                        <select class="form-select" id="order-sort" >
                        <option>All</option>
                        <option>Delivered</option>
                        <option>In Progress</option>
                        <option>Delayed</option>
                        <option>Canceled</option>
                        </select>
                    </div>
                </div>
                <!-- Orders list-->
                <div class="table-responsive fs-md mb-4">
                {%if orders%}
                <table class="table table-hover mb-0">
                    <thead>
                    <tr>
                        <th>Order #</th>
                        <th>Date Purchased</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                        {% if orders %}
                        {% for order in orders %}
                            <tr>
                                <td class="py-3"><span class="badge bg-secondary m-0"><a class="nav-link-style fw-medium fs-sm" href="{% url 'dashboard:store_order_details' store.slug  order.pk %}" data-bs-toggle="modal">{{order.order_number}}</a></span></td>
                                <td class="py-3">{{order.created_at|timesince}} ago</td>
                                <td class="py-3"><span class="badge bg-info m-0">{{order.status}}</span></td>
                                <td class="py-3"><a href="#"> <span class=" badge btn btn-primary btn-sm me-3"><i class="ci-download me-1"></i>Download</span></a></td>
                                
                            </tr>
                        {% endfor%}   
                        {%endif%}
                    </tbody>
                </table>
                {%else%}
                    <h3>you have no orders yet</h3>
                {%endif%}
                </div>
                <!-- Pagination-->
                <div class="row" >
                <div class="col-md-12">
                    {% if orders.has_other_pages %}
                    <ul class="pagination justify-content-center">
                        {% if orders.has_previous %}
                        <li class="page-item">
                            <a href="?page={{orders.previous_page_number}}" class="page-link">&laquo;</a>
                        </li>
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link">&laquo;</a>
                        </li>
                        {% endif %}
                        {% for i in orders.paginator.page_range %}
                        {% if orders.number == i %}
                            <li class="page-item active">
                            <a class="page-link">{{i}}</a>
                            </li>
                        {% else %}
                            <li class="page-item">
                            <a href="?page={{i}}" class="page-link">{{i}}</a>
                            </li>
                        {% endif %}
                        {% endfor %}
                        {% if orders.has_next %}
                        <li class="page-item">
                            <a href="?page={{orders.next_page_number}}" class="page-link">&raquo;</a>
                        </li>
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link">&raquo;</a>
                        </li>
                        {% endif %}
                    </ul>
                    {% endif %}
                </div>
                </div>
            </section>
      </div>
    </div>
  </div>

{% endblock %}