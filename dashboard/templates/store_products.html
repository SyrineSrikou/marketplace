{% extends 'base.html' %}

{% load static %}
{% block content%}

 <!-- Dashboard header-->
 <div class="page-title-overlap bg-accent pt-4">
    <div class="container d-flex flex-wrap flex-sm-nowrap justify-content-center justify-content-sm-between align-items-center pt-2">
      <div class="d-flex align-items-center pb-3">
        <div class="img-thumbnail rounded-circle position-relative flex-shrink-0" ><img class="rounded-circle " src="{{store.logo.url}}" width="150" alt="store logo"></div>
        <div class="ps-3">
          <h3 class="text-light fs-lg mb-0">{{store.name}}</h3><span class="d-block text-light fs-ms opacity-60 py-1">Opened since {{store.create_date}}</span>
        </div>
      </div>
      <div class="d-flex">
        <div class="text-sm-end me-5">
          <div class="text-light fs-base">Total sales</div>
          <h3 class="text-light">426</h3>
        </div>
        <div class="text-sm-end">
          <div class="text-light fs-base">Store rating</div>
          <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i>
          </div>
          <div class="text-light opacity-60 fs-xs">Based on 98 reviews</div>
        </div>
      </div>
    </div>
  </div>
  <div >
    <div class="bg-light shadow-lg rounded-3 overflow-hidden">
      <div class="row">
        <!-- Sidebar-->
        <aside class="col-lg-4 pe-xl-5">
          <!-- Account menu toggler (hidden on screens larger 992px)-->
          <div class="d-block d-lg-none p-4"><a class="btn btn-outline-accent d-block" href="#store" data-bs-toggle="collapse"><i class="ci-menu me-2"></i>Account menu</a></div>
          <!-- Actual menu-->
          <div class="h-100 border-end mb-2">
            <div class="d-lg-block collapse" id="store">
              <div class="bg-secondary p-4">
                <h3 class="fs-sm mb-0 text-muted">Store Dashboard</h3>
              </div>
              <ul class="list-unstyled mb-0">
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3 " href="{% url 'store:store_dashboard' store.slug %}"><i class="ci-settings opacity-60 me-2"></i>Settings</a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3 active" href="{% url 'dashboard:store_products' store.slug %}"><i class="ci-package opacity-60 me-2"></i>Products<span class="fs-sm text-muted ms-auto">{{products.count}}</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="{% url 'dashboard:store_orders' store.slug %}"><i class="ci-package opacity-60 me-2"></i>Orders<span class="fs-sm text-muted ms-auto"></span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="{% url 'store:add_product' store.slug %}"><i class="ci-cloud-upload opacity-60 me-2"></i>Add New Product</a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3" href="#"><i class="ci-dollar opacity-60 me-2"></i>Sales<span class="fs-sm text-muted ms-auto">$1,375.00</span></a></li>
              </ul>
              <hr>
            </div>
          </div>
        </aside>
        <!-- Content-->
          <section class="col-lg-8 pt-lg-4 pb-4 mb-3">
            <div class="pt-2 px-4 ps-lg-0 pe-xl-5">
              <!-- Title-->
              <div class="d-sm-flex flex-wrap justify-content-between align-items-center border-bottom">
                <h2 class="h3 py-2 me-2 text-center text-sm-start">Store products<span class="badge bg-faded-accent fs-sm text-body align-middle ms-2">{{products.count}}</span></h2>
                <div class="py-2">
                  <div class="d-flex flex-nowrap align-items-center pb-3">
                    <label class="form-label fw-normal text-nowrap mb-0 me-2" for="sorting">Sort by:</label>
                    <select class="form-select form-select-sm me-2" id="sorting">
                      <option>Date Created</option>
                      <option>Product Name</option>
                      <option>Price</option>
                      <option>Your Rating</option>
                      <option>Updates</option>
                    </select>
                    <button class="btn btn-outline-secondary btn-sm px-2" type="button"><i class="ci-arrow-up"></i></button>
                  </div>
                </div>
              </div>
              <!-- Product-->
              <div class="table-responsive">
                <table class="table m-0">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">Product Name</th>
                            <th scope="col">Date Added</th>
                            <th scope="col">Price</th>
                            <th scope="col">Stock</th>
                            <th scope="col">Action</th>
                           
                        </tr>
                    </thead>
                    <tbody>
                        {% for product in products %}
                        
                        <tr>
                            
                            <td><img src="{{product.image.url}}" width="60"></td>
                            <td><a href="{% url 'discover:product_detail' product.category.slug product.slug %}">{{product.name}}</a></td>
                            <td>{{product.created_date}}</td>
                            <td>{{product.price}}</td>
                            <td>{{product.stock}}</td>
                            

                            <td>
                                <!-- Call to action buttons -->
                                <ul class="list-inline m-0">
                                    {% if store.is_approved == True and store.store_status == 'Opened'%}
                                    <li class="list-inline-item">
                                      <a href="{% url 'store:edit_product' product.slug %}"><button class="btn btn-success btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Edit">Edit</button>
                                      </a>
                                    </li>
                                    {%endif%}
                                    <li class="list-inline-item">
                                      <a href="{% url 'store:delete_product' product.slug %}"><button class="btn btn-danger btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Delete">Delete</button>
                                        </a>
                                      </li>
                                </ul>
                            </td>
                        </tr>
                        
                        {%endfor%}
                    </tbody>
                </table>
            </div>
            </div>
          </section>
      </div>
    </div>
  </div>
{% endblock %}